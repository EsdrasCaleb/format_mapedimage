define("format_mapedimage/imagemap",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;_exports.init=function(imageSource){require(["jquery"],(function($){var _this=this,img=new Image;img.addEventListener("load",(function(){var current_x=null,current_y=null,current_weigth=null,current_heigth=null,forma=null,currentSelect=null,newSelect=function(){currentSelect=$(this),forma=$(this).parent().next().children("select").val(),current_heigth=$(this).parent().prev(),current_weigth=current_heigth.prev(),current_y=current_weigth.prev(),current_x=current_y.prev()},changeLink=function(){var pai=$(this).parent().next();console.log(pai),console.log(pai.children(".section")),console.log(pai.children(".url")),"link"==this.value?(pai.children(".section").addClass("hidden"),pai.children(".url").removeClass("hidden")):(pai.children(".url").addClass("hidden"),pai.children(".section").removeClass("hidden"))};$(".rdSelect").change(newSelect),$(".rdSelect").click(),$(".cmbForma").change((function(){return forma=_this.value})),$(".cmbTipo").change(changeLink),$("#btnAddMore").click((function(){var _this2=this;$("#containerAdd").append('<div class="containers row"><input type="hidden" name="x[]"><input type="hidden" name="y[]"><input type="hidden" name="weigth[]"><input type="hidden" name="heigth[]"><div class="col-2"><input type="radio" name="selected[]" class="rdSelect" />Selecionar</div><div class="col-2"><select class="cmbForma" name="forma"><option value="rect">Retangulo</option><option value="circle">Circulo</option></select></div><div class="col-2"><select class="cmbTipo" name="tipo[]"><option value="link">Link</option><option value="section">Secao</option></select></div><div class="col-sm"><select class="section hidden" name="sectuin[]"><option value="section">section</option></select><input class="url" name="url[]" type="text" value="" /></div><div class="col-1">    <button class="btnRemove">Remover</button></div></div>'),$(".containers:last .btnRemove").click((function(){$(this).parent().parent().remove()})),$(".rdSelect").off("change"),$(".rdSelect").change(newSelect),$(".cmbForma").off("change"),$(".cmbForma").change((function(){return forma=_this2.value})),$(".cmbTipo").off("change"),$(".cmbTipo").change(changeLink)}));var imageWidth=img.naturalWidth,imageHeight=img.naturalHeight;imageWidth>1024&&(imageHeight=1024*imageHeight/imageWidth,imageWidth=1024),$("#canvas").attr("height",imageHeight);var startX,startY,canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),canvasOffset=$("#canvas").offset(),offsetX=canvasOffset.left,offsetY=canvasOffset.top,isDown=!1;function drawImage(){ctx.drawImage(img,0,0,imageWidth,imageHeight),$(".rdSelect").each((function(){if($(this)==currentSelect)return!0;var x=$(this).parent().prev().prev().prev().prev().val(),y=$(this).parent().prev().prev().prev().val();ctx.moveTo(x,y),"rect"==$(this).parent().next().children("select").val()?ctx.rect(x,y,$(this).parent().prev().prev().val(),$(this).parent().prev().val()):ctx.arc(x,y,$(this).parent().prev().val(),0,2*Math.PI),ctx.stroke(),ctx.globalAlpha=.5,ctx.fill(),ctx.globalAlpha=1}))}function handleMouseMove(e){isDown&&(e.preventDefault(),e.stopPropagation(),mouseX=parseInt(e.clientX-offsetX),mouseY=parseInt(e.clientY-offsetY),"rect"==forma?function(x,y){ctx.globalAlpha=1,ctx.clearRect(0,0,canvas.width,canvas.height),drawImage(),ctx.moveTo(x,y),ctx.beginPath();var sizex=Math.abs(startX-x),sizey=Math.abs(startY-y),originx=startX>x?x:startX,originy=startY>y?y:startY;ctx.rect(originx,originy,sizex,sizey),ctx.stroke(),ctx.globalAlpha=.5,ctx.fill(),current_heigth.val(sizey),current_weigth.val(sizex),current_y.val(originy),current_x.val(originx)}(mouseX,mouseY):function(x,y){ctx.globalAlpha=1,ctx.clearRect(0,0,canvas.width,canvas.height),drawImage(),ctx.beginPath(),ctx.moveTo(x,y);var coordx=startX+(x-startX)/2,coordy=startY+(y-startY)/2,rad=Math.sqrt((startX-x)*(startX-x)+(startY-y)*(startY-y))/2;ctx.arc(coordx,coordy,rad,0,2*Math.PI),ctx.stroke(),ctx.globalAlpha=.5,ctx.fill(),current_heigth.val(rad),current_weigth.val(rad),current_y.val(coordy),current_x.val(coordx)}(mouseX,mouseY))}$("#canvas").mousedown((function(e){!function(e){e.preventDefault(),e.stopPropagation(),startX=parseInt(e.clientX-offsetX),startY=parseInt(e.clientY-offsetY),isDown=!0}(e)})),$("#canvas").mousemove((function(e){handleMouseMove(e)})),$("#canvas").mouseup((function(e){!function(e){isDown&&(e.preventDefault(),e.stopPropagation(),isDown=!1)}(e)})),$("#canvas").mouseout((function(e){!function(e){isDown&&(e.preventDefault(),e.stopPropagation(),isDown=!1)}(e)})),$("#page").scroll((function(e){var BB=canvas.getBoundingClientRect();offsetX=BB.left,offsetY=BB.top})),drawImage()})),img.src=imageSource}))}}));

//# sourceMappingURL=imagemap.min.js.map